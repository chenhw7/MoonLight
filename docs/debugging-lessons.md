# 调试经验记录

**当代码修改一次不成功、需要反复对话才能修改正确时，说明初始分析没有抓住根本原因，必须回到 Phase 1 重新进行系统性分析，而不是在错误的假设上继续修补。**

## 前端开发经验

- 前端组件访问后端 API 返回的数据时，字段命名必须与后端 Pydantic 模型完全一致（Python 使用 snake_case，前端也需使用下划线命名而非驼峰命名）。
- 当页面出现空白但无网络错误时，通常是前端渲染时访问了 undefined 的属性（如 `.length`），需要为可能为空的数据添加默认值或可选链操作符。
- 导入路径错误（如 `@/types/api` 不存在）会导致运行时错误而非编译时错误，需检查实际文件结构。
- API 拦截器如果直接返回 `response.data`，则服务层不应再访问 `.data` 属性，需根据实际拦截器逻辑调整数据解析方式。
- 使用 TypeScript 时，为解构的数据提供默认值（如 `recentResumes = []`）可以避免 undefined 错误，但默认值的类型必须与接口定义完全匹配。
- **类型定义不一致会导致连锁错误**：修改类型定义时需同步更新所有使用该类型的组件，保持命名风格统一（要么全部驼峰，要么全部下划线）。
- **IDE 诊断信息可能滞后**：TypeScript 语言服务可能有缓存，重启 TS Server 或重新运行 `tsc --noEmit` 可获取最新诊断。

## 后端开发经验

- SQLAlchemy 模型字段名可能与业务逻辑中使用的名称不同（如 `title` 而非 `resume_name`），需查看实际模型定义而非假设字段名。
- Pydantic 模型默认使用下划线命名，与 Python 代码风格一致，不应强制转换为驼峰命名。

## 通用经验

- 遇到错误时首先查看浏览器控制台（前端）或应用日志（后端），错误堆栈通常会精确定位问题所在行。
- 数据流问题（前端显示空数据）需检查三个环节：后端返回数据格式、API 传输过程、前端解析逻辑，用日志或断点确认每个环节的数据内容。
- **批量替换字段名时要完整**：使用 sed 或全局替换时，确保替换所有出现位置，包括类型定义、组件使用、默认值等。
- **解构赋值默认值只在 undefined 时生效**：当属性可能为 null 时，解构赋值的默认值不会生效，需使用 `??` 或 `||` 在解构后提供默认值。
