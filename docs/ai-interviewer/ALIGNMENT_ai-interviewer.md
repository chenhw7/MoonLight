# AI 面试官功能 - 对齐文档

## 文档信息
- **创建日期**: 2026-02-12
- **功能名称**: AI 面试官 (AI Interviewer)
- **文档类型**: ALIGNMENT - 需求对齐与边界确认

---

## 1. 原始需求

用户希望为 MoonLight 简历生成器添加 AI 面试官功能：

> "用户需要上传面试的企业，岗位名称，JD等信息，比如字节跳动，前端工程师，xxx等信息，用户的简历，AI会基于这些信息化身为一名严格的面试官，向面试者问问题"

### 1.1 核心需求拆解
1. 用户填写目标企业、岗位、JD 信息
2. 系统关联用户的简历数据
3. AI 扮演面试官角色进行提问
4. 区分校招和社招场景
5. 社招场景支持选择"技术深挖"或"技术问答"模式

---

## 2. 项目现状分析

### 2.1 技术栈
- **前端**: React 18 + TypeScript + Vite + TailwindCSS + shadcn/ui
- **后端**: FastAPI + Python 3.12 + SQLAlchemy + PostgreSQL
- **状态管理**: Zustand
- **HTTP 客户端**: Axios

### 2.2 现有功能
- 用户认证系统（登录/注册/找回密码）
- 简历管理系统（CRUD、PDF 导出、头像上传）
- 简历模板系统（ModernTemplate）

### 2.3 数据模型
- `users` - 用户表
- `resumes` - 简历表（含基本信息、教育、工作、项目、技能）
- 关联关系已建立

### 2.4 可复用组件
- 认证系统（登录态管理）
- 简历选择和展示组件
- 对话框、表单等 UI 组件
- API 请求封装

---

## 3. 需求理解

### 3.1 功能范围

#### 3.1.1 包含的功能
| 模块 | 说明 |
|-----|------|
| 面试配置 | 选择简历、填写企业/JD、选择模式/风格 |
| 多轮面试 | 开场白 → 自我介绍 → 核心问答 → 反问 → 报告 |
| 历史记录 | 完整保存面试对话和评价报告 |
| 模型配置 | 支持自定义 AI 模型（URL/Key/模型名） |
| 评价报告 | 多维度评分和改进建议 |

#### 3.1.2 不包含的功能（MVP 阶段）
- 语音对话（文字对话 MVP）
- 视频面试
- 实时语音转文字
- 多人面试
- 面试题库管理

### 3.2 用户场景

#### 场景 1: 校招生准备面试
- 用户: 计算机专业应届毕业生
- 目标: 准备字节跳动前端工程师校招面试
- 流程:
  1. 选择自己的校招简历
  2. 填写"字节跳动"、"前端工程师"、粘贴 JD
  3. 选择"校招" → "基础知识问答"模式
  4. 选择"严格专业型"风格
  5. 开始面试

#### 场景 2: 社招人员准备跳槽
- 用户: 3 年经验后端工程师
- 目标: 准备阿里巴巴 Java 工程师社招面试
- 流程:
  1. 选择自己的工作简历
  2. 填写"阿里巴巴"、"Java 工程师"、粘贴 JD
  3. 选择"社招" → "技术深挖"模式
  4. 选择"严格专业型"风格
  5. 开始面试

### 3.3 面试模式矩阵

| 招聘类型 | 可选模式 | 内容特点 |
|---------|---------|---------|
| **校招** | 基础知识问答 | 算法、数据结构、计网、OS |
| | 项目/实习深挖 | 校园项目、实习经历、技术细节 |
| | 编程题 | 手写代码、算法实现 |
| **社招** | 技术深挖 | 工作项目、架构设计、技术选型 |
| | 技术问答 | 八股文、框架原理 |
| | 场景设计 | 系统设计、功能设计题 |

### 3.4 面试官风格

| 风格 | 特点 | 适用场景 |
|-----|------|---------|
| 严格专业型 | 犀利追问，客观直接 | 真实面试模拟 |
| 温和引导型 | 循序渐进，鼓励为主 | 初次体验、建立信心 |
| 压力测试型 | 频繁质疑，制造紧张 | 高阶挑战、抗压训练 |

---

## 4. 边界确认

### 4.1 功能边界

#### 4.1.1 明确包含
- ✅ 文字对话式面试
- ✅ 多轮递进式面试流程
- ✅ 校招/社招模式区分
- ✅ 多种面试模式选择
- ✅ 可配置面试官风格
- ✅ 完整历史记录保存
- ✅ 多维度评价报告
- ✅ 自定义 AI 模型配置
- ✅ 双入口设计（简历列表 + 导航菜单）

#### 4.1.2 明确不包含（MVP）
- ❌ 语音对话
- ❌ 视频面试
- ❌ 代码在线运行
- ❌ 面试题目库管理
- ❌ 社交分享功能
- ❌ 面试预约/提醒

### 4.2 技术边界

#### 4.2.1 模型支持
- 支持 OpenAI 兼容接口
- 支持自动获取模型列表
- 支持手动填写模型名
- 支持对话/思考/视觉模型配置

#### 4.2.2 数据存储
- 面试会话数据持久化
- 消息记录完整保存
- 评价报告 JSON 存储

### 4.3 用户权限边界
- 仅登录用户可使用
- 只能使用自己的简历
- 只能查看自己的面试记录

---

## 5. 疑问澄清记录

### 5.1 已澄清问题

| 问题 | 决策 |
|-----|------|
| 面试形式？ | 文字对话（MVP） |
| 面试流程？ | 多轮递进式 |
| 校招是否有项目问答？ | 是，包含项目/实习深挖 |
| 社招模式选择？ | 技术深挖、技术问答、场景设计 |
| 面试官风格？ | 可配置（严格/温和/压力） |
| 历史记录保存？ | 完整保存 |
| AI 模型配置？ | 通用配置，支持自动发现 |
| 入口设计？ | 双入口（简历列表 + 导航） |

### 5.2 假设与约束

#### 假设
1. 用户已具备基本面试常识
2. 用户提供的 JD 是真实有效的
3. AI 模型接口稳定可用

#### 约束
1. 依赖外部 AI 模型 API
2. 长对话可能受限于模型上下文长度
3. 评价质量取决于模型能力

---

## 6. 风险识别

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| AI 模型 API 不稳定 | 面试中断 | 实现断点续传机制 |
| 模型生成内容质量差 | 用户体验差 | 提供模型切换功能 |
| 长对话超出上下文 | 丢失前文 | 实现对话摘要机制 |
| 用户隐私担忧 | 不愿使用 | 明确数据使用政策 |

---

## 7. 成功标准

### 7.1 功能完成标准
- [ ] 用户可以完整配置并开始一次面试
- [ ] AI 能根据简历和 JD 提出针对性问题
- [ ] 面试流程完整（开场 → 问答 → 报告）
- [ ] 评价报告包含所有维度
- [ ] 历史记录可查看和回顾

### 7.2 体验标准
- [ ] 面试配置流程 < 2 分钟
- [ ] AI 响应时间 < 5 秒
- [ ] 面试过程流畅无中断

---

## 8. 相关文档

- [CONSENSUS_ai-interviewer.md](./CONSENSUS_ai-interviewer.md) - 需求共识文档
- [DESIGN_ai-interviewer.md](./DESIGN_ai-interviewer.md) - 系统设计文档
- [TASK_ai-interviewer.md](./TASK_ai-interviewer.md) - 任务拆分文档

---

## 9. 变更记录

| 日期 | 版本 | 变更内容 | 作者 |
|-----|------|---------|------|
| 2026-02-12 | v1.0 | 初始版本 | AI Assistant |
