# ç®€å†é¢„è§ˆå’ŒPDFå¯¼å‡ºé‡æ„

## é—®é¢˜æè¿°

### é—®é¢˜1ï¼šé¢„è§ˆåˆ†é¡µæ²¡æœ‰ä¸Šè¾¹è·
- åŸå› ï¼šåˆ†é¡µçº¿åªæ˜¯è§†è§‰æç¤ºï¼Œå®é™…å†…å®¹æ˜¯è¿ç»­çš„
- å½±å“ï¼šé¢„è§ˆæ—¶çœ‹ä¸åˆ°çœŸå®çš„åˆ†é¡µæ•ˆæœ

### é—®é¢˜2ï¼šPDFå¯¼å‡ºä¸é¢„è§ˆæ•ˆæœä¸ä¸€è‡´
- åŸå› ï¼šPDFå¯¼å‡ºæ˜¯å°†æ•´ä¸ªå†…å®¹ä½œä¸ºä¸€å¼ é•¿å›¾åˆ‡å‰²ï¼Œæ— æ³•ä¿è¯ä¸é¢„è§ˆä¸€è‡´
- å½±å“ï¼šç”¨æˆ·çœ‹åˆ°çš„é¢„è§ˆå’Œæœ€ç»ˆPDFä¸åŒ

## è§£å†³æ–¹æ¡ˆ

### æ–°æ¶æ„ï¼šçœŸæ­£çš„å¤šé¡µé¢å®¹å™¨

é‡‡ç”¨æ–¹æ¡ˆä¸‰ï¼ˆåŠ¨æ€é¡µé¢å®¹å™¨ï¼‰çš„æ”¹è¿›ç‰ˆï¼š
- æ¯ä¸ªé¡µé¢æ˜¯ç‹¬ç«‹çš„ A4 å®¹å™¨ï¼ˆ210mm Ã— 297mmï¼‰
- æ¯ä¸ªé¡µé¢æœ‰å›ºå®šçš„ä¸Šä¸‹å·¦å³è¾¹è·ï¼ˆ18mmï¼‰
- é¡µé¢ä¹‹é—´æœ‰æ˜æ˜¾çš„é—´éš”ï¼ˆ20pxï¼‰
- æ¯é¡µç‹¬ç«‹å¯¼å‡ºä¸ºPDFï¼Œç¡®ä¿é¢„è§ˆå’Œå¯¼å‡ºä¸€è‡´

### å®ç°ç»†èŠ‚

#### 1. PageContainer ç»„ä»¶
**æ–‡ä»¶ï¼š** `frontend/src/pages/Resume/components/PageContainer.tsx`

**åŠŸèƒ½ï¼š**
- å›ºå®š A4 å°ºå¯¸çš„é¡µé¢å®¹å™¨
- å†…ç½®é¡µç æ˜¾ç¤ºï¼ˆæ‰“å°æ—¶éšè—ï¼‰
- æ”¯æŒåˆ†é¡µæ§åˆ¶
- è‡ªåŠ¨å¤„ç†æº¢å‡º

**ç‰¹ç‚¹ï¼š**
```tsx
- width: 210mm (A4å®½åº¦)
- height: 297mm (A4é«˜åº¦)
- padding: 18mm (æ ‡å‡†è¾¹è·)
- box-sizing: border-box (åŒ…å«è¾¹è·)
- overflow: hidden (éšè—æº¢å‡ºå†…å®¹)
```

#### 2. å¤šé¡µé¢PDFå¯¼å‡º
**æ–‡ä»¶ï¼š** `frontend/src/utils/pdf.ts`

**æ–°å¢å‡½æ•°ï¼š** `exportMultiPageToPDF`

**å·¥ä½œæµç¨‹ï¼š**
1. è·å–æ‰€æœ‰é¡µé¢å®¹å™¨ï¼ˆ`.page-container`ï¼‰
2. é€é¡µä½¿ç”¨ html2canvas æ¸²æŸ“ä¸ºå›¾ç‰‡
3. æ¯é¡µç‹¬ç«‹æ·»åŠ åˆ° PDF æ–‡æ¡£
4. ä¿å­˜ä¸ºå•ä¸ª PDF æ–‡ä»¶

**ä¼˜åŠ¿ï¼š**
- âœ… æ¯é¡µç‹¬ç«‹æ¸²æŸ“ï¼Œè´¨é‡æ›´é«˜
- âœ… é¢„è§ˆå’Œå¯¼å‡ºå®Œå…¨ä¸€è‡´
- âœ… æ”¯æŒä»»æ„å¤šé¡µ
- âœ… é¡µé¢é—´è·æ­£ç¡®

#### 3. æ‰“å°æ ·å¼æ”¯æŒ
**æ–‡ä»¶ï¼š** `frontend/src/pages/Resume/resume-print.css`

**åŠŸèƒ½ï¼š**
- å®šä¹‰ `@page` è§„åˆ™ï¼Œè®¾ç½® A4 çº¸å¼ 
- æ§åˆ¶åˆ†é¡µè¡Œä¸ºï¼ˆ`page-break-after`, `page-break-inside`ï¼‰
- éšè—ä¸å¿…è¦çš„å…ƒç´ 
- ç¡®ä¿å†…å®¹ä¸æº¢å‡º

#### 4. ResumePreview é‡æ„
**æ–‡ä»¶ï¼š** `frontend/src/pages/Resume/components/ResumePreview.tsx`

**æ”¹åŠ¨ï¼š**
- ç§»é™¤æ—§çš„åˆ†é¡µçº¿è®¡ç®—é€»è¾‘
- ä½¿ç”¨ `PageContainer` ç»„ä»¶åŒ…è£¹å†…å®¹
- PDF å¯¼å‡ºè°ƒç”¨æ–°çš„ `exportMultiPageToPDF`
- ç®€åŒ–çŠ¶æ€ç®¡ç†

## ä½¿ç”¨æ•ˆæœ

### é¢„è§ˆç•Œé¢
- âœ… æ¯ä¸ªé¡µé¢æ˜¾ç¤ºä¸ºç‹¬ç«‹çš„ç™½è‰²å¡ç‰‡
- âœ… é¡µé¢ä¹‹é—´æœ‰ 20px é—´è·
- âœ… æ¯é¡µå³ä¸‹è§’æ˜¾ç¤ºé¡µç 
- âœ… ç¼©æ”¾åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### PDF å¯¼å‡º
- âœ… æ¯é¡µç‹¬ç«‹ç”Ÿæˆï¼Œè´¨é‡ä¸€è‡´
- âœ… é¡µé¢å°ºå¯¸ä¸¥æ ¼ä¸º A4
- âœ… é¡µé¢é—´è·æ­£ç¡®
- âœ… å†…å®¹ä¸ä¼šæ¨ªå‘æº¢å‡º

## å½“å‰é™åˆ¶

### å•é¡µæ˜¾ç¤º
ç›®å‰ç®€å†å†…å®¹å…¨éƒ¨æ˜¾ç¤ºåœ¨ç¬¬ä¸€é¡µï¼Œå¦‚æœå†…å®¹è¿‡å¤šä¼šæº¢å‡ºã€‚

### åç»­ä¼˜åŒ–æ–¹å‘

#### æ™ºèƒ½åˆ†é¡µç®—æ³•
éœ€è¦å®ç°å†…å®¹åˆ†é…ç®—æ³•ï¼Œå°†ç®€å†å„éƒ¨åˆ†æ™ºèƒ½åˆ†é…åˆ°å¤šä¸ªé¡µé¢ï¼š

1. **æµ‹é‡å†…å®¹é«˜åº¦**
   - éå†å„ä¸ª sectionï¼ˆæ•™è‚²ã€å·¥ä½œã€é¡¹ç›®ç­‰ï¼‰
   - è®¡ç®—æ¯ä¸ª section çš„å®é™…é«˜åº¦

2. **åˆ†é…é¡µé¢**
   - ä»ç¬¬ä¸€é¡µå¼€å§‹å¡«å……å†…å®¹
   - å½“å‰©ä½™ç©ºé—´ä¸è¶³æ—¶ï¼Œåˆ›å»ºæ–°é¡µ
   - ç¡®ä¿ section ä¸è¢«æˆªæ–­

3. **åŠ¨æ€æ¸²æŸ“**
   - æ ¹æ®å†…å®¹åŠ¨æ€åˆ›å»ºå¤šä¸ª `PageContainer`
   - æ¯ä¸ªé¡µé¢åŒ…å«é€‚é‡çš„å†…å®¹

#### å‚è€ƒå®ç°æ€è·¯
```typescript
// ä¼ªä»£ç ç¤ºä¾‹
function distributeContent(sections) {
  const pages = [];
  let currentPage = { content: [], height: 0 };
  const maxPageHeight = 297 - 18 * 2; // A4é«˜åº¦ - ä¸Šä¸‹è¾¹è·
  
  sections.forEach(section => {
    const sectionHeight = measureHeight(section);
    
    if (currentPage.height + sectionHeight > maxPageHeight) {
      // å½“å‰é¡µæ”¾ä¸ä¸‹ï¼Œåˆ›å»ºæ–°é¡µ
      pages.push(currentPage);
      currentPage = { content: [section], height: sectionHeight };
    } else {
      // å½“å‰é¡µè¿˜æœ‰ç©ºé—´
      currentPage.content.push(section);
      currentPage.height += sectionHeight;
    }
  });
  
  pages.push(currentPage);
  return pages;
}
```

## æµ‹è¯•å»ºè®®

### æµ‹è¯•ç”¨ä¾‹1ï¼šçŸ­ç®€å†ï¼ˆ1é¡µä»¥å†…ï¼‰
- æ·»åŠ å°‘é‡æ•™è‚²å’Œå·¥ä½œç»å†
- é¢„è§ˆåº”æ˜¾ç¤º1é¡µ
- PDFåº”è¯¥åªæœ‰1é¡µ

### æµ‹è¯•ç”¨ä¾‹2ï¼šé•¿ç®€å†ï¼ˆ2-3é¡µï¼‰
- æ·»åŠ å¤šä¸ªå·¥ä½œç»å†å’Œé¡¹ç›®
- é¢„è§ˆåº”æ˜¾ç¤ºå¤šé¡µï¼ˆéœ€è¦å®ç°æ™ºèƒ½åˆ†é¡µåï¼‰
- PDFé¡µæ•°åº”ä¸é¢„è§ˆä¸€è‡´

### æµ‹è¯•ç”¨ä¾‹3ï¼šé•¿æ–‡æœ¬æº¢å‡º
- åœ¨å·¥ä½œæè¿°ä¸­è¾“å…¥è¶…é•¿æ–‡æœ¬
- æ–‡æœ¬åº”è¯¥è‡ªåŠ¨æ¢è¡Œ
- ä¸åº”è¯¥æ¨ªå‘æº¢å‡º

### æµ‹è¯•ç”¨ä¾‹4ï¼šå›¾ç‰‡ï¼ˆå¤´åƒï¼‰
- ä¸Šä¼ å¤´åƒ
- é¢„è§ˆåº”æ­£å¸¸æ˜¾ç¤º
- PDFä¸­å¤´åƒåº”æ¸…æ™°

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- `frontend/src/pages/Resume/components/PageContainer.tsx` - é¡µé¢å®¹å™¨ç»„ä»¶
- `frontend/src/pages/Resume/resume-print.css` - æ‰“å°æ ·å¼
- `docs/PDF_MULTI_PAGE_REFACTOR.md` - æœ¬æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶
- `frontend/src/pages/Resume/components/ResumePreview.tsx` - ä½¿ç”¨æ–°çš„å¤šé¡µé¢æ¶æ„
- `frontend/src/utils/pdf.ts` - æ·»åŠ å¤šé¡µé¢å¯¼å‡ºå‡½æ•°
- `frontend/src/pages/Resume/components/templates/ModernTemplate.tsx` - ä¿æŒä¸å˜ï¼ˆå·²æœ‰æ–‡å­—æ¢è¡Œæ ·å¼ï¼‰

## æ€»ç»“

è¿™æ¬¡é‡æ„ä»æ ¹æœ¬ä¸Šè§£å†³äº†é¢„è§ˆå’ŒPDFå¯¼å‡ºä¸ä¸€è‡´çš„é—®é¢˜ï¼Œé‡‡ç”¨çœŸæ­£çš„å¤šé¡µé¢å®¹å™¨æ¶æ„ï¼Œä¸ºåç»­å®ç°æ™ºèƒ½åˆ†é¡µå¥ å®šäº†åŸºç¡€ã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- ğŸ¯ é¢„è§ˆå³æ‰€å¾—
- ğŸ“„ çœŸæ­£çš„åˆ†é¡µæ”¯æŒ
- âœ¨ é¡µé¢é—´è·æ­£ç¡®
- ğŸ”§ æ˜“äºæ‰©å±•
